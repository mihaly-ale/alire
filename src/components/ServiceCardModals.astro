---
import { Modal } from 'accessible-astro-components';
const overlays = await Astro.glob('../../src/content/overlays/*.md');
---

{
	overlays.map((overlay) => (
		<Modal
			triggerId={overlay.frontmatter.title}
			title={overlay.frontmatter.title}
			closeText="Cerrar">
			<overlay.Content />
		</Modal>
	))
}

<style is:global>
	.modal {
		background-repeat: no-repeat;
		background-position: center;
		background-size: cover;

		box-shadow: 0 0 25px var(--clr-transparent-50);
		border: none;

		&::backdrop {
			background-color: var(--clr-transparent-50);
			filter: none;
			opacity: 0.75;
		}

		h3,
		p {
			margin: 0;
		}

		h3 {
			color: var(--clr-accent-300);
			font-family: Merienda;
			font-weight: 200;
			font-size: clamp(var(--fs-desktop-h2), 2.15vw, var(--fs-desktop-h2));
			text-align: center;
			margin-block-end: var(--em-spacing-50);
		}

		p {
			color: white;
			background-color: var(--clr-transparent-50);
			padding: var(--em-spacing-50);
			border-radius: var(--rad-25);
		}
	}

	.modal[aria-labelledby='Nutrición'] {
		background-image: linear-gradient(
				to bottom,
				var(--clr-transparent-50),
				var(--clr-transparent-30)
			),
			image-set(
				url(/public/images/nutrition-overlay.avif) type('image/avif'),
				url(/public/images/nutrition-overlay.webp) type('image/webp'),
				url(/public/images/nutrition-overlay.jpg) type('image/jpg')
			);
	}

	.modal[aria-labelledby='Masaje'] {
		background-image: linear-gradient(
				to bottom,
				var(--clr-transparent-50),
				var(--clr-transparent-30)
			),
			image-set(
				url(/public/images/massage-overlay.avif) type('image/avif'),
				url(/public/images/massage-overlay.webp) type('image/webp'),
				url(/public/images/massage-overlay.jpg) type('image/jpg')
			);
	}

	.modal[aria-labelledby='Osteopatía'] {
		background-image: linear-gradient(
				to bottom,
				var(--clr-transparent-50),
				var(--clr-transparent-30)
			),
			image-set(
				url(/public/images/osteopathy-overlay.avif) type('image/avif'),
				url(/public/images/osteopathy-overlay.webp) type('image/webp'),
				url(/public/images/osteopathy-overlay.jpg) type('image/jpg')
			);
	}

	.modal[aria-labelledby='Biomagnetismo'] {
		background-image: linear-gradient(
				to bottom,
				var(--clr-transparent-50),
				var(--clr-transparent-30)
			),
			image-set(
				url(/public/images/biomagnet-overlay.avif) type('image/avif'),
				url(/public/images/biomagnet-overlay.webp) type('image/webp'),
				url(/public/images/biomagnet-overlay.jpg) type('image/jpg')
			);
	}

	.modal__close button {
		background: var(--clr-primary-100);
		padding: var(--em-spacing-50);
		font-size: clamp(var(--fs-phone-large), 1.45vw, var(--fs-desktop-large));
		font-weight: var(--fw-500);

		&:hover,
		&:focus {
			background: var(--clr-primary-300);
		}
	}
</style>
