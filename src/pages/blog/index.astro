---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import { Image } from 'astro:assets';
import pageMotif from '../../../public/logos/motif-dark.svg';
const blogPosts = await getCollection('blog');
---

<Layout
	title="Blogs"
	headline="Mi Blog"
	showHero={false}
	heroShrunk={true}
	isSecondaryPage={true}>
	<main class="secondary-page-content">
		<section>
			{
				blogPosts.map((post) => (
					<article class="container">
						<h2 class="blog-title">
							<a href={`/blog/${post.slug}`}>
								{post.data.title} - {post.data.subtitle}
							</a>
						</h2>

						<p>
							<a href={`/blog/${post.data.author}`} class="author">
								{post.data.author}
							</a>
							&nbsp;&middot;
							{new Date(post.data.publishedDate).toLocaleDateString('es-ES', {
								year: 'numeric',
								month: 'long',
								day: 'numeric',
							})}
						</p>

						<ul class="tags">
							{post.data.category.map((category) => (
								<li>
									<a href={`${category}`} class="tag">
										{category}
									</a>
								</li>
							))}
						</ul>

						<a href={`/blog/${post.slug}`} class="blog-link">
							<Image
								src={post.data.image}
								alt=""
								aria-hidden="true"
								width="500"
								height="300"
								decoding="async"
								loading="eager"
								class="blog-image"
							/>
							<p class="blog-excerpt">{post.body.slice(0, 250)} ...</p>

							<a class="btn btn-secondary" href={`/blog/${post.slug}`}>
								Saber m√°s
							</a>
						</a>
						<Image src={pageMotif} alt="" width="24" height="24" />
					</article>
				))
			}
		</section>
	</main>
</Layout>

<style>
	.container {
		display: flex;
		flex-direction: column;
		margin-block-end: var(--rem-spacing-400);
	}

	.blog-title a {
		color: var(--clr-primary-500);
	}

	.author {
		background-color: var(--clr-secondary-500);
		padding: var(--em-spacing-50) var(--em-spacing-25);
		border-radius: var(--rad-25);
		color: var(--bg-color);
		text-decoration: none;
		transition: all 150ms;

		&:hover {
			color: var(--text-color);
			background-color: var(--clr-secondary-100);
		}
	}

	.tags {
		display: flex;
		gap: var(--em-spacing-25);
		padding: 0;
		margin-block-end: var(--em-spacing-50);

		list-style-type: none;
	}

	.tag {
		text-decoration: none;

		background-color: var(--clr-accent-200);
		color: var(--text-color);
		padding: var(--em-spacing-25);
		border-radius: var(--rad-25);
		transition: opacity 150ms;

		&:hover {
			background-color: var(--bg-color);
			opacity: 0.8;
		}
	}

	.blog-link {
		text-decoration: none;
		color: var(--text-color);
	}
	img {
		margin-block-end: var(--em-spacing-50);
	}

	.container > :last-child {
		margin-top: var(--rem-spacing-200);
		align-self: center;
	}
</style>
