---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import { Image } from 'astro:assets';
import pageMotif from '../../../public/logos/motif-dark.svg';
const blogPosts = await getCollection('blog');
---

<Layout
	title="Blogs"
	headline="Mi Blog"
	showHero={false}
	heroShrunk={true}
	isSecondaryPage={true}>
	<main class="secondary-page-content">
		{blogPosts}
		{
			blogPosts.map((post) => (
				<div class="container">
					<h2 class="blog-title">
						<a href={`/blog/${post.slug}`}>{post.data.title}</a>
					</h2>

					<p class="intro">
						<span class="author">{post.data.author}</span>
						&middot;
						{new Date(post.data.publishedDate).toLocaleDateString('es-ES', {
							// weekday: "short",
							year: 'numeric',
							month: 'long',
							day: 'numeric',
						})}
					</p>

					<Image
						src={post.data.image}
						alt=""
						aria-hidden="true"
						width="500"
						height="300"
						decoding="async"
						loading="eager"
					/>

					<p>{post.body.slice(0, 250)} ...</p>

					<a class="btn btn-secondary" href={`/blog/${post.slug}`}>
						{' '}
						Saber m√°s
					</a>

					<Image src={pageMotif} alt="" width="24" height="24" />
				</div>
			))
		}
	</main>
</Layout>

<style>
	.container {
		display: flex;
		flex-direction: column;
		gap: var(--rem-spacing-75);
		margin-block-end: var(--rem-spacing-400);
	}

	.blog-title a {
		color: var(--clr-primary-500);
	}

	.author {
		background-color: var(--clr-secondary-500);
		padding: var(--em-spacing-50) var(--em-spacing-25);
		border-radius: var(--rad-25);
		color: var(--bg-color);
	}

	.container > :last-child {
		margin-top: var(--rem-spacing-200);
		align-self: center;
	}
</style>
